#!/bin/bash

# Parameter 1 is the directory, and 2 is a brief description.
function CheckDir 
{
  TARGET_DIR=$1
  DESC=$2
  if test -d $TARGET_DIR ; then
    pushd $TARGET_DIR &>/dev/null
      git ls-changes --no-print
      # Grab return code and if non-zero, then we have changes
      rc=$?
      if [[ $rc != 0 ]] ; then
        echo "$DESC"
        git ls-changes --padding
        echo ""
      fi
    popd &>/dev/null
  fi
} 

echo ""

CheckDir ~/dotfiles "dotfiles"
CheckDir ~/dotfiles/private "dotfiles/private"
CheckDir ~/sci/imagevis3d "sci/imagevis3d"
CheckDir ~/sci/imagevis3d/Tuvok "sci/imagevis3d/tuvok"
CheckDir ~/sci/imagevis3d/Tuvok/IO "sci/imagevis3d/tuvok/io"
CheckDir ~/sci/imagevis3d/Tuvok/Basics "sci/imagevis3d/tuvok/basics"
CheckDir ~/sci/spire "sci/spire"
CheckDir ~/sci/srun5 "sci/srun5"
CheckDir ~/sci/hypack "sci/hypack"
CheckDir ~/prosp "prosp"
CheckDir ~/me "me"
CheckDir ~/backups "backups"
CheckDir ~/ion2 "ion2"
CheckDir ~/orion "orion"
CheckDir ~/media "media"
CheckDir ~/art "art"

# Run checkrepos from me repository (which contains subrepos)
${HOME}/me/scripts/checkrepos

echo "rsyncing ~/me/sync"
echo ""
${HOME}/me/scripts/performSync

